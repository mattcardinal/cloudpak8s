{"version":3,"sources":["webpack:///./src/pages/content/integration/deploy-fast-file-transfer.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-content-integration-deploy-fast-file-transfer-md-df0cbf1768dc707ca1f8.js","sourcesContent":["import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/Shared/VBDData/programs/cloudpak8s/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#introduction\"\n        }}>{`Introduction`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#prepare-installation\"\n        }}>{`Prepare Installation`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#begin-installation\"\n        }}>{`Begin Installation`}</a></li>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"#validate-installation\"\n        }}>{`Validate installation`}</a></li>\n    </ul>\n    <h3>{`Introduction`}</h3>\n    <p>{`This page contains guidance on how to configure the Aspera release for both on-prem and ROKS.`}</p>\n    <h3>{`Prepare Installation`}</h3>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Change project to aspera`}</strong></p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`oc project aspera\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Use Node Labels:`}</strong>{`  `}</p>\n        <p parentName=\"li\">{`In order to ensure high availability, the Aspera Swarm services will attempt to create a configurable number of pods on each node in the Kubernetes cluster. The nodes on which the receiver pods are running can be restricted via the nodeLabels values.  `}</p>\n        <p parentName=\"li\">{`For example, the following would restrict pods to nodes with the `}<inlineCode parentName=\"p\">{`node-role.kubernetes.io/ascp=true`}</inlineCode>{` label or `}<inlineCode parentName=\"p\">{`node-role.kubernetes.io/noded=true`}</inlineCode>{` label.`}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`ascpSwarm:\nconfig:\n    nodeLabels:\n    node-role.kubernetes.io/ascp: \"true\"\n\nnodedSwarm:\nconfig:\n    nodeLabels:\n    node-role.kubernetes.io/noded: \"true\"\n`}</code></pre>\n        <p parentName=\"li\">{`Label Nodes using the command  `}</p>\n        <pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`oc label node &lt;node-name> node-role.kubernetes.io/&lt;role>=true\n`}</code></pre>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Additional RBAC Requirements:`}</strong>{`  `}</p>\n        <p parentName=\"li\">{`The following RBAC resources are also required before you deploy the chart. Use the command `}<inlineCode parentName=\"p\">{`oc create -f &lt;filename.yaml>`}</inlineCode></p>\n        <ul parentName=\"li\">\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Cluster Admin`}</strong><ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"%7B%7Bsite.github.url%7D%7D/assets/img/integration/aspera/files/cluster-admin-clusterrole.yaml\"\n                }}>{`ClusterRole`}</a></li>\n            </ul></li>\n          <li parentName=\"ul\"><strong parentName=\"li\">{`Namespace User`}</strong><br parentName=\"li\"></br>\n            {`Substitute {{ NAMESPACE }} with the namespace the chart will be deployed in.`}<ul parentName=\"li\">\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"%7B%7Bsite.github.url%7D%7D/assets/img/integration/aspera/files/namespace-user-clusterrole.yaml\"\n                }}>{`ClusterRoleBinding`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"%7B%7Bsit.github.url%7D%7D/assets/img/integration/aspera/files/namespace-user-role.yaml\"\n                }}>{`Role`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"%7B%7Bsite.github.url%7D%7D/assets/img/integration/aspera/files/namespace-user-rolebinding.yaml\"\n                }}>{`RoleBinding`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"%7B%7Bsite.github.url%7D%7D/assets/img/integration/aspera/files/hsts-prod-rolebinding.yaml\"\n                }}>{`RoleBinding`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"%7B%7Bsite.github.ur%7D%7D/assets/img/integration/aspera/files/apsera-sa-role.yaml\"\n                }}>{`ServiceAccount`}</a>{` - Set to `}<inlineCode parentName=\"li\">{`ibm-entitlement-key`}</inlineCode>{` if using entitled registry or if offline use the `}<inlineCode parentName=\"li\">{`deployer-dockercfg-XX`}</inlineCode>{` secret in your namespace.  Use `}<inlineCode parentName=\"li\">{`oc get secrets`}</inlineCode>{` to get the value.`}</li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"%7B%7Bsite.github.ur%7D%7D/assets/img/integration/aspera/files/secret-gen-role.yaml\"\n                }}>{`Secret Generation Role`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"%7B%7Bsite.github.url%7D%7D/assets/img/integration/aspera/files/secret-gen-rolebinding.yaml\"\n                }}>{`Secret Generation RoleBinding`}</a></li>\n              <li parentName=\"ul\"><a parentName=\"li\" {...{\n                  \"href\": \"%7B%7Bsite.github.url%7D%7D/assets/img/integration/aspera/files/secret-gen-sa.yaml\"\n                }}>{`Secret Generation ServiceAccount`}</a>{`  `}</li>\n            </ul></li>\n        </ul>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><strong parentName=\"p\">{`Create the secrets`}</strong></p>\n      </li>\n    </ol>\n    <p>{`Make sure you have copied your aspera license key to the location where you will be creating the secrets.  The following command assumes it is named `}<inlineCode parentName=\"p\">{`aspera-license`}</inlineCode>{`.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc create secret generic aspera-server --from -file=ASPERA_LICENSE=\"./aspera-license\" --from-literal=TOKEN_ENCRYPTION_KEY=\"my_encryption_key\"\n\nkubectl create secret generic asperanode-nodeadmin --from-literal=NODE_USER=\"myuser\" --from-literal=NODE_PASS=\"mypassword\"\n\nkubectl create secret generic asperanode-accesskey --from-literal=ACCESS_KEY_ID=\"my_access_key\" --from-literal=ACCESS_KEY_SECRET=\"my_access_key_secret\"\n`}</code></pre>\n    <h3>{`Begin Installation`}</h3>\n    <ol>\n      <li parentName=\"ol\">{`Go to CP4I Platform Home. Click `}<strong parentName=\"li\">{`Create instance`}</strong>{` inside the `}<strong parentName=\"li\">{`Aspera`}</strong>{` tile.    `}</li>\n      <li parentName=\"ol\">{`A window will pop up with a description of the requirements for installing. Click `}<strong parentName=\"li\">{`Continue`}</strong>{` to the helm chart deployment configuration.`}</li>\n      <li parentName=\"ol\">{`Click `}<strong parentName=\"li\">{`Overview`}</strong>{` to view the chart information and pre-reqs that were covered in `}<a parentName=\"li\" {...{\n          \"href\": \"#prepare-installation\"\n        }}>{`Prepare Installation`}</a>{`.`}</li>\n      <li parentName=\"ol\">{`Click `}<strong parentName=\"li\">{`Configure`}</strong></li>\n      <li parentName=\"ol\">{`Enter the Helm release name. In our example, `}<strong parentName=\"li\">{`Aspera-1`}</strong></li>\n      <li parentName=\"ol\">{`Enter Target Namespace - `}<strong parentName=\"li\">{`Aspera`}</strong></li>\n      <li parentName=\"ol\">{`Select a Cluster - `}<strong parentName=\"li\">{`local-cluster`}</strong>{`.`}</li>\n      <li parentName=\"ol\">{`Tick the license agreement checkbox.`}</li>\n      <li parentName=\"ol\">{`Under Parameters -> Quick start`}<ol parentName=\"li\">\n          <li parentName=\"ol\">{`Ingress - icp-proxy address defined during icp / common-services installation - icp-proxy.\\\\`}{`<`}{`openshift-router-domain>  `}</li>\n          <li parentName=\"ol\">{`Aspera Node - Server Secret - the secret created using the license - `}<inlineCode parentName=\"li\">{`aspera-server`}</inlineCode></li>\n          <li parentName=\"ol\">{`Aspera Event Journal - Kafka Host - use hostname of bootstrap server of existing eventstreams installation. Get this value from the Eventstreams web ui.  `}</li>\n          <li parentName=\"ol\">{`Aspera Rproxy - address of cluster proxy.  This can be configured later if need be.`}</li>\n        </ol></li>\n      <li parentName=\"ol\">{`Click All Parameters`}</li>\n      <li parentName=\"ol\">{`Uncheck production usage`}</li>\n      <li parentName=\"ol\">{`Image Pull Secret - the secret used to pull images for install from the docker registry. Set to `}<inlineCode parentName=\"li\">{`ibm-entitlement-key`}</inlineCode>{` if using entitled registry or if offline use the `}<inlineCode parentName=\"li\">{`deployer-dockercfg-XX`}</inlineCode>{` secret in your namespace.`}</li>\n      <li parentName=\"ol\">{`Scroll down to the Redis section.`}</li>\n      <li parentName=\"ol\">{`Check Persistence Enabled.`}</li>\n      <li parentName=\"ol\">{`Check Use dynamic provisioning.`}</li>\n      <li parentName=\"ol\">{`Storage Class Name - enter storage class for file storage`}</li>\n      <li parentName=\"ol\">{`Image Pull Secret - same as step 11.  `}</li>\n      <li parentName=\"ol\">{`Scroll down to Persistence`}</li>\n      <li parentName=\"ol\">{`Enter the same Storage Class Name as step 15`}</li>\n      <li parentName=\"ol\">{`Proceed to the section Aspera Node`}</li>\n      <li parentName=\"ol\">{`Node Admin Secret - enter the nodeadmin secret created in the preious section - `}<inlineCode parentName=\"li\">{`asperanode-nodeadmin`}</inlineCode></li>\n      <li parentName=\"ol\">{`Access Key Secret - enter the access key secret created in the previous section - `}<inlineCode parentName=\"li\">{`asperanode-accesskey`}</inlineCode></li>\n      <li parentName=\"ol\">{`Proceed to the section - Aspera Event Journal`}</li>\n      <li parentName=\"ol\">{`Kafka Port - change to Kafka port found in Eventstreams bootstrapi server.  `}</li>\n      <li parentName=\"ol\">{`Proceed to section Ascp Swarm`}</li>\n      <li parentName=\"ol\">{`Node Labels - enter the node labels created in the previous section for identifying ascp swarm nodes -  `}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`{-node-role.kubernetes.io/ascp: true}\n`}</code></pre>\n    <ol {...{\n      \"start\": 26\n    }}>\n      <li parentName=\"ol\">{`Proceed to section - Noded Swarm`}</li>\n      <li parentName=\"ol\">{`Node Labels - set to the node label created for noded from the previous section`}</li>\n    </ol>\n    <pre><code parentName=\"pre\" {...{}}>{`{-node-role.kubernetes.io/noded: \"true\"}\n`}</code></pre>\n    <ol {...{\n      \"start\": 28\n    }}>\n      <li parentName=\"ol\">{`Scroll to section - Sch`}</li>\n      <li parentName=\"ol\">{`Image Pull Secret - the secret used to pull images for install from the docker registry. Set to `}<inlineCode parentName=\"li\">{`ibm-entitlement-key`}</inlineCode>{` if using entitled registry or if offline use the `}<inlineCode parentName=\"li\">{`deployer-dockercfg-XX`}</inlineCode>{` secret in your namespace.`}</li>\n    </ol>\n    <h3>{`Validate installation`}</h3>\n    <ol>\n      <li parentName=\"ol\">{`View all pods running`}<pre parentName=\"li\"><code parentName=\"pre\" {...{}}>{`NAME                                                       READY     STATUS      RESTARTS   AGE\naspera-1-aspera-hsts-aej-d8c5b5569-24vh8                   1/1       Running     0          3m\naspera-1-aspera-hsts-aej-d8c5b5569-68nvj                   1/1       Running     0          3m\naspera-1-aspera-hsts-aej-d8c5b5569-v5xgb                   1/1       Running     0          3m\naspera-1-aspera-hsts-ascp-loadbalancer-75849464b-lq8lz     1/1       Running     0          3m\naspera-1-aspera-hsts-ascp-swarm-54c98cb6bb-hznw5           2/2       Running     0          3m\naspera-1-aspera-hsts-create-access-key-v1-24hdg            0/1       Completed   0          3m\naspera-1-aspera-hsts-http-proxy-8b86df4f-8hd6d             1/1       Running     0          3m\naspera-1-aspera-hsts-node-api-796f5c8ccc-r9xs2             2/2       Running     0          3m\naspera-1-aspera-hsts-node-master-788774bbc7-8sl2s          2/2       Running     0          3m\naspera-1-aspera-hsts-noded-loadbalancer-844977799b-f4gd6   1/1       Running     0          3m\naspera-1-aspera-hsts-noded-swarm-6b8498fd-slj8g            2/2       Running     0          3m\naspera-1-aspera-hsts-prometheus-endpoint-bc5974d79-4fv4t   2/2       Running     0          3m\naspera-1-aspera-hsts-prometheus-endpoint-bc5974d79-d426s   2/2       Running     0          3m\naspera-1-aspera-hsts-prometheus-endpoint-bc5974d79-t7f8l   2/2       Running     0          3m\naspera-1-aspera-hsts-stats-5c5c8cc8fc-c2gbr                2/2       Running     0          3m\naspera-1-aspera-hsts-stats-5c5c8cc8fc-lcbxr                2/2       Running     0          3m\naspera-1-aspera-hsts-stats-5c5c8cc8fc-qpj5l                2/2       Running     0          3m\naspera-1-aspera-hsts-tcp-proxy-748b6bb64-j478m             1/1       Running     0          3m\naspera-1-redis-ha-sentinel-0                               1/1       Running     0          3m\naspera-1-redis-ha-sentinel-1                               1/1       Running     0          2m\naspera-1-redis-ha-sentinel-2                               1/1       Running     0          1m\naspera-1-redis-ha-server-0                                 1/1       Running     0          3m\naspera-1-redis-ha-server-1                                 1/1       Running     0          2m\naspera-1-redis-ha-server-2                                 1/1       Running     0          2m\n`}</code></pre></li>\n    </ol>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}