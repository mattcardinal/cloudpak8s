{"componentChunkName":"component---src-pages-content-data-install-add-on-md","path":"/content/data/install-add-on/","result":{"pageContext":{"frontmatter":{"title":"Install Add-Ons on Red Hat OpenShift on IBM Cloud","weight":700},"relativePagePath":"/content/data/install-add-on.md","titleType":"page","MdxNode":{"id":"12b78d25-cdb7-52b7-9513-e94cf62d6ffa","children":[],"parent":"a0791ec2-a8cd-5bb4-898c-74240dc29873","internal":{"content":"---\ntitle: Install Add-Ons on Red Hat OpenShift on IBM Cloud\nweight: 700\n---\n\n## **Overview**\n**Note:** Add-ons for Cloud Pak for Data in the Red Hat OpenShift on IBM Cloud is **NOT** officially supported at this time.  Some add-ons, like data virtualization, may install successfully, but will have an issue during provisioning.  There are technical issues with this and other add-ons, like Db2 Warehouse, where \"SELinux\" can not be in \"enforcing\" mode.  However, Red Hat OpenShift itself requires \"SELinux\" to be in \"enforcing\" mode.  Since this is a managed environment, access to change this setting is not available. \nThere are plans for add-ons to support this environment in the future.  The following describes a way to install the \"Watson Machine Learning\" add-on which appears to work successfully.  But it should be noted again that this is **NOT** officially supported.\n\n## Set Up the OpenShift Client CLI Tools and Access the Cluster\n1. If you haven't done so already, install the OpenShift client CLI tools using the directions at [here](https://cloud.ibm.com/docs/openshift?topic=openshift-openshift-cli).\n2. Login to the OpenShift console.  In the upper right hand side of the page, click on your user name and select \"Copy Login Command\".\n![LoginScreen](https://pages.github.ibm.com/CASE/cloudpak-onboard-residency/assets/img/cp4d/qijunlogin.jpg)\n3. Paste the command in a shell and a response will be returned with a list of projects and the current project selected.\n\n## Set Up the CP4D \"deploy.sh\" for Add-On Installation\n1. Retrieve the CP4D installer and only extract its contents using the \"--extract-only\" switch.  For example,\n_\"./installer.x86_64.520 --extract-only\"_\n2. The \"deploy.sh\" script that will be used later to install an add-on will be located at \"/ibm/InstallPackage/components/\".\n\n## Install helm and tiller\n1. Use the following script to set up helm and tiller\n[ helm_install.sh](https://pages.github.ibm.com/CASE/cloudpak-onboard-residency/assets/img/helm_install.sh)\n2. Verify the installation using\n_\"helm version --tls\"_.  The output should resemble something like this:\n```\nhelm version --tls\nClient: &version.Version{SemVer:\"v2.9.1\", GitCommit:\"20adb27c7c5868466912eebdf6664e7390ebe710\", GitTreeState:\"clean\"}\nServer: &version.Version{SemVer:\"v2.9.1\", GitCommit:\"20adb27c7c5868466912eebdf6664e7390ebe710\", GitTreeState:\"clean\"}\n```\n\n## Set Up a Registry\n1. Go to [IBM Cloud](https://cloud.ibm.com) and select \"Kubernetes\" then \"Registry\".  Follow the directions \"Registry Quick Start\" to create a registry.  Take note of the namespace you created.\n2. At the top of the web page, select \"Manage\" then \"Access (IAM)\". On the left side panel, select \"IBM Cloud API keys\" and then click the button \"Create an IBM Cloud API key\".  Make sure to save your key. ![LoginScreen](https://pages.github.ibm.com/CASE/cloudpak-onboard-residency/assets/img/cp4d/manageiam.jpg)\n3. Back in the shell, enter the following to login into the registry.\n_\"docker login us.icr.io/[your-registry-namespace] -u iamapikey -p [your-iam-key]\"_\n\n## Get the Add-On to be Installed\n1. For this example, the \"Watson Machine Learning\" add-on tar will be used.  Download the add-on code and place it somewhere like \"/ibm/modules\"\n\n## Install the Add-On\n1. _\"./deploy.sh -o -d /ibm/modules/watson_machine_learning.tar\"_\n\n## Installation Progress\nThe following shows the output you will see upon a successful \"Watson Machine Learning\" add-on installation.\n```\nThe following environment variables will be used during the installation:\n-----------------------------------------------------------------------------\nnamespace:                       zen\nclusterDockerImagePrefix:        us.icr.io/cp4d2101\nexternalDockerImagePrefix:       us.icr.io/cp4d2101\nuseDynamicProvisioning:          true\nstorageClassName:                ibmc-file-gold\n-----------------------------------------------------------------------------\nIf these values are not correct, type N to go back and change it.\nPlease type (Y) to proceed or (N) to exit the installation: y\nDocker version found: 1.13.1\nDocker config file found: /root/.docker/config.json\nKubernetes version found: Server Version: v1.11.0+d4cacc0\nKubernetes config file found: /root/.kube/config\nkubectl is working\nOpenshift binary found: oc v3.11.141\nLoading images\n/ibm/InstallPackage/modules/wml//images\nLoaded Images [==============================================================================] 6m41s (17/17) done\nPushed Images [==============================================================================] 26m54s (17/17) done\nDeploying the chart as name wml\nRunning command: /ibm/InstallPackage/components/dpctl --config /ibm/InstallPackage/components/install.yaml helm rewriteChart -i /ibm/InstallPackage/modules/wml//charts/*.tgz -o /ibm/InstallPackage/modules/wml//charts/updated_wml.tgz\nRunning command: /ibm/InstallPackage/components/dpctl --config /ibm/InstallPackage/components/install.yaml helm installChart -f /ibm/InstallPackage/components/global.yaml   -r zen-wml -n zen -c /ibm/InstallPackage/modules/wml//charts/updated_wml.tgz \nStarting the installation ...\nPackage  Release zen-wml installed.\nRunning command: /ibm/InstallPackage/components/dpctl --config /ibm/InstallPackage/components/install.yaml helm waitChartReady -r zen-wml -t 60\nPods:         [==============================================================================] 7m3s (13/13) done\nPVCs:         [==============================================================================] 1m35s (2/2) done\nDeployments:  [==============================================================================] 5m52s (5/5) done\nStatefulSets: [==============================================================================] 7m2s (2/2) done\nThe deploy script finished successfully\n```\n\n","type":"Mdx","contentDigest":"c5fb80c85fb653fbfc44c508409389ac","counter":157,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Install Add-Ons on Red Hat OpenShift on IBM Cloud","weight":700},"exports":{},"rawBody":"---\ntitle: Install Add-Ons on Red Hat OpenShift on IBM Cloud\nweight: 700\n---\n\n## **Overview**\n**Note:** Add-ons for Cloud Pak for Data in the Red Hat OpenShift on IBM Cloud is **NOT** officially supported at this time.  Some add-ons, like data virtualization, may install successfully, but will have an issue during provisioning.  There are technical issues with this and other add-ons, like Db2 Warehouse, where \"SELinux\" can not be in \"enforcing\" mode.  However, Red Hat OpenShift itself requires \"SELinux\" to be in \"enforcing\" mode.  Since this is a managed environment, access to change this setting is not available. \nThere are plans for add-ons to support this environment in the future.  The following describes a way to install the \"Watson Machine Learning\" add-on which appears to work successfully.  But it should be noted again that this is **NOT** officially supported.\n\n## Set Up the OpenShift Client CLI Tools and Access the Cluster\n1. If you haven't done so already, install the OpenShift client CLI tools using the directions at [here](https://cloud.ibm.com/docs/openshift?topic=openshift-openshift-cli).\n2. Login to the OpenShift console.  In the upper right hand side of the page, click on your user name and select \"Copy Login Command\".\n![LoginScreen](https://pages.github.ibm.com/CASE/cloudpak-onboard-residency/assets/img/cp4d/qijunlogin.jpg)\n3. Paste the command in a shell and a response will be returned with a list of projects and the current project selected.\n\n## Set Up the CP4D \"deploy.sh\" for Add-On Installation\n1. Retrieve the CP4D installer and only extract its contents using the \"--extract-only\" switch.  For example,\n_\"./installer.x86_64.520 --extract-only\"_\n2. The \"deploy.sh\" script that will be used later to install an add-on will be located at \"/ibm/InstallPackage/components/\".\n\n## Install helm and tiller\n1. Use the following script to set up helm and tiller\n[ helm_install.sh](https://pages.github.ibm.com/CASE/cloudpak-onboard-residency/assets/img/helm_install.sh)\n2. Verify the installation using\n_\"helm version --tls\"_.  The output should resemble something like this:\n```\nhelm version --tls\nClient: &version.Version{SemVer:\"v2.9.1\", GitCommit:\"20adb27c7c5868466912eebdf6664e7390ebe710\", GitTreeState:\"clean\"}\nServer: &version.Version{SemVer:\"v2.9.1\", GitCommit:\"20adb27c7c5868466912eebdf6664e7390ebe710\", GitTreeState:\"clean\"}\n```\n\n## Set Up a Registry\n1. Go to [IBM Cloud](https://cloud.ibm.com) and select \"Kubernetes\" then \"Registry\".  Follow the directions \"Registry Quick Start\" to create a registry.  Take note of the namespace you created.\n2. At the top of the web page, select \"Manage\" then \"Access (IAM)\". On the left side panel, select \"IBM Cloud API keys\" and then click the button \"Create an IBM Cloud API key\".  Make sure to save your key. ![LoginScreen](https://pages.github.ibm.com/CASE/cloudpak-onboard-residency/assets/img/cp4d/manageiam.jpg)\n3. Back in the shell, enter the following to login into the registry.\n_\"docker login us.icr.io/[your-registry-namespace] -u iamapikey -p [your-iam-key]\"_\n\n## Get the Add-On to be Installed\n1. For this example, the \"Watson Machine Learning\" add-on tar will be used.  Download the add-on code and place it somewhere like \"/ibm/modules\"\n\n## Install the Add-On\n1. _\"./deploy.sh -o -d /ibm/modules/watson_machine_learning.tar\"_\n\n## Installation Progress\nThe following shows the output you will see upon a successful \"Watson Machine Learning\" add-on installation.\n```\nThe following environment variables will be used during the installation:\n-----------------------------------------------------------------------------\nnamespace:                       zen\nclusterDockerImagePrefix:        us.icr.io/cp4d2101\nexternalDockerImagePrefix:       us.icr.io/cp4d2101\nuseDynamicProvisioning:          true\nstorageClassName:                ibmc-file-gold\n-----------------------------------------------------------------------------\nIf these values are not correct, type N to go back and change it.\nPlease type (Y) to proceed or (N) to exit the installation: y\nDocker version found: 1.13.1\nDocker config file found: /root/.docker/config.json\nKubernetes version found: Server Version: v1.11.0+d4cacc0\nKubernetes config file found: /root/.kube/config\nkubectl is working\nOpenshift binary found: oc v3.11.141\nLoading images\n/ibm/InstallPackage/modules/wml//images\nLoaded Images [==============================================================================] 6m41s (17/17) done\nPushed Images [==============================================================================] 26m54s (17/17) done\nDeploying the chart as name wml\nRunning command: /ibm/InstallPackage/components/dpctl --config /ibm/InstallPackage/components/install.yaml helm rewriteChart -i /ibm/InstallPackage/modules/wml//charts/*.tgz -o /ibm/InstallPackage/modules/wml//charts/updated_wml.tgz\nRunning command: /ibm/InstallPackage/components/dpctl --config /ibm/InstallPackage/components/install.yaml helm installChart -f /ibm/InstallPackage/components/global.yaml   -r zen-wml -n zen -c /ibm/InstallPackage/modules/wml//charts/updated_wml.tgz \nStarting the installation ...\nPackage  Release zen-wml installed.\nRunning command: /ibm/InstallPackage/components/dpctl --config /ibm/InstallPackage/components/install.yaml helm waitChartReady -r zen-wml -t 60\nPods:         [==============================================================================] 7m3s (13/13) done\nPVCs:         [==============================================================================] 1m35s (2/2) done\nDeployments:  [==============================================================================] 5m52s (5/5) done\nStatefulSets: [==============================================================================] 7m2s (2/2) done\nThe deploy script finished successfully\n```\n\n","fileAbsolutePath":"/Users/Shared/VBDData/programs/cloudpak8s/src/pages/content/data/install-add-on.md"}}}}